# üöÄ –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å Brocar –Ω–∞ VPS

## –ß—Ç–æ —Ç–µ–±–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è
- VPS —Å Ubuntu (20.04 / 22.04 / 24.04)
- –î–æ–º–µ–Ω, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ IP —Ç–≤–æ–µ–≥–æ VPS
- SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

---

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ VPS

```bash
ssh root@—Ç–≤–æ–π_ip_–∞–¥—Ä–µ—Å
```

---

## –®–∞–≥ 2: –û–±–Ω–æ–≤–∏ —Å–∏—Å—Ç–µ–º—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker Compose
apt install docker-compose-plugin -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º nginx
apt install nginx -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Git
apt install git -y
```

---

## –®–∞–≥ 3: –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª—ã

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git (–µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub/GitLab)

```bash
cd /var/www
git clone https://github.com/—Ç–≤–æ–π-—é–∑–µ—Ä/brocar.git
cd brocar
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ SFTP (–∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é)

1. –ò—Å–ø–æ–ª—å–∑—É–π FileZilla –∏–ª–∏ WinSCP
2. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ VPS –ø–æ SFTP (—Ç–æ—Ç –∂–µ IP –∏ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å)
3. –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É `/var/www/brocar`
4. –ó–∞–≥—Ä—É–∑–∏ –í–°–ï —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ —Ç—É–¥–∞

---

## –®–∞–≥ 4: –°–æ–∑–¥–∞–π —Ñ–∞–π–ª .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /var/www/brocar
nano .env
```

–í—Å—Ç–∞–≤—å —Ç—É–¥–∞ —Å–≤–æ–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–∑ ENV_TEMPLATE.txt –∏–ª–∏ .env.local):

```
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
DATABASE_URL=postgresql://...
# –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

–°–æ—Ö—Ä–∞–Ω–∏: `Ctrl+X`, –ø–æ—Ç–æ–º `Y`, –ø–æ—Ç–æ–º `Enter`

---

## –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ Docker

```bash
cd /var/www/brocar

# –°–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose up -d --build
```

–ü–æ–¥–æ–∂–¥–∏ 2-5 –º–∏–Ω—É—Ç –ø–æ–∫–∞ —Å–æ–±–µ—Ä—ë—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker compose ps

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫)
docker compose logs -f
```

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∞–π—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000:
```bash
curl http://localhost:3000
```

---

## –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π nginx

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥
cp /var/www/brocar/nginx.conf /etc/nginx/sites-available/brocar

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º - –º–µ–Ω—è–µ–º "—Ç–≤–æ–π-–¥–æ–º–µ–Ω.ru" –Ω–∞ —Å–≤–æ–π —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
nano /etc/nginx/sites-available/brocar

# –°–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫
ln -s /etc/nginx/sites-available/brocar /etc/nginx/sites-enabled/

# –£–¥–∞–ª—è–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º nginx
systemctl restart nginx
```

---

## –®–∞–≥ 7: –ü–æ–ª—É—á–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º certbot
apt install certbot python3-certbot-nginx -y

# –ü–æ–ª—É—á–∞–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∑–∞–º–µ–Ω–∏ –¥–æ–º–µ–Ω!)
certbot --nginx -d —Ç–≤–æ–π-–¥–æ–º–µ–Ω.ru -d www.—Ç–≤–æ–π-–¥–æ–º–µ–Ω.ru
```

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ. Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç nginx –¥–ª—è HTTPS.

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Ç–≤–æ–π —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É `https://—Ç–≤–æ–π-–¥–æ–º–µ–Ω.ru`

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
cd /var/www/brocar
docker compose restart

# –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ)
cd /var/www/brocar
git pull                      # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å git
docker compose up -d --build  # –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker compose down

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å nginx
systemctl status nginx

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx
systemctl restart nginx
```

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker compose ps`
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `docker compose logs`
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ nginx —Ä–∞–±–æ—Ç–∞–µ—Ç: `systemctl status nginx`
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ—Ä—Ç 80/443 –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ VPS

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –±–∏–ª–¥–µ
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `docker compose logs`
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ .env —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã

### –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç API/–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
1. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Supabase –∫–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```
/var/www/brocar/
‚îú‚îÄ‚îÄ .env                 # –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ Dockerfile           # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ docker-compose.yml   # –ö–æ–Ω—Ñ–∏–≥ Docker Compose
‚îú‚îÄ‚îÄ nginx.conf           # –®–∞–±–ª–æ–Ω –¥–ª—è nginx
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ app/
‚îú‚îÄ‚îÄ components/
‚îú‚îÄ‚îÄ lib/
‚îî‚îÄ‚îÄ ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
```
